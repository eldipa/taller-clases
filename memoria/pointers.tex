\input{../preamble-tmp.tex}

\title%
{Memoria en C++ - Punteros}


\subject{Memoria en C++ - Punteros}


\begin{document}

\begin{frame}[noframenumbering,plain]
   \titlepage
\end{frame}


~% macro content() %~
\section{Punteros}
% simples
\begin{frame}[fragile]{Punteros}
         \begin{lstlisting}[style=normal]
int *p;    // p es un puntero a int
           // (p guarda la direccion de un int)

int i = 1;
p = &i;    // &i es la direccion de la variable i

*p = 2;    // *p dereferencia o accede a la memoria
           // cuya direccion esta guardada en p

/* i == 2 */

         \end{lstlisting}
         \begin{lstlisting}[style=normal]

char buf[512];
write(&buf[0], 512);

         \end{lstlisting}
\end{frame}

% aritmetica de punteros
\begin{frame}[fragile]{Aritm\'etica de punteros}
         \begin{lstlisting}[style=normal]
int a[10];
int *p;

p = &a[0];

*p       // a[0]
*(p+1)   // a[1]


int *p;
p+1      // movete sizeof(int) bytes (4)

char *c;
c+2      // movete 2*sizeof(char) bytes (2)

         \end{lstlisting}
\end{frame}
\note[itemize] {
\item La notaci\'on de array (indexado) y la aritm\'etica de punteros son escencialmente lo mismo.
\item La aritm\'etica de punteros se basa en el tama\~no de los objetos a los que se apunta al igual que el indexado de un array.
}

% punteros a funcion
\begin{frame}[fragile]{Punteros a funciones (al code segment)}
         \begin{lstlisting}[style=normal]
int g(char) {}

int (*p)(char);
p = &g;
         \end{lstlisting}
\pause
         \begin{lstlisting}[style=normal]
#include <stdlib.h>
void qsort(void *base,
           size_t nmemb,
           size_t size,

           int (*cmp)(const void *, const void *)
          );

int cmp_personas(const void* a, const void* b) {
    struct Persona *pa = (struct Persona*)a;
    struct Persona *pb = (struct Persona*)b;

    return pa->edad - pb->edad;
}

         \end{lstlisting}
\end{frame}

~% endmacro %~

~{ content() }~


\end{document}


